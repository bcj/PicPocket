{% whitespace all %}<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <link rel="stylesheet" type="text/css" href="/style.css" >
    <title>{{title}}</title>
</head>
<body>
    {% module NavBar() %}

    <main>
        <h1>{{title}}</h1>
        <p>{{description}}</p>

        {% if endpoints %}
        <dl id="endpoints">
        {% for name, info in endpoints.items() %}
        {% if name != "home" %}
            <dt><a href="{{info.path}}">{{name}}</a></dt>
            <dd>{{info.description}}</dd>
        {% end %}
        {% end %}
        </dl>
        {% end %}

        {% if actions %}
        <div id="actions-info">
            <h2>Resource Actions</h2>
            <form id="go-to-action" hidden>
                <input id="id" name="id" type="{{id_type}}" placeholder="id" required>
                <select id="action" name="action">
                {% for name, info in actions.items() %}
                    <option value="{{info.path}}">{{name}}</option>
                {% end %}
                </select>
                <button type="button" onclick="go_to_action('{{id_name}}')" class="go-action">Go</button>
            </form>
            <dl id=actions>
            {% for name, info in actions.items() %}
                <dt>{{name}}</dt>
                <dd>{{info.description}}</dd>
            {% end %}
            </dl>
        </div>
        {% end %}
    </main>
    {% if actions %}
    <script type="text/javascript" src="/scripts.js"></script>
    <script type="text/javascript">
        function setup_js() {
            element = document.getElementById("go-to-action");
            if (element) {
                element.hidden = false;
            }
        }

        window.addEventListener("DOMContentLoaded", setup_js);
    </script>
    {% end %}
</body>
</html>